# 親愛的，我把檔案「加密」了
黃慰民、張凱迪、張珈語
本文由黃慰民主任進行分析，張凱迪彙整撰寫，張珈語協同作業。
##一、前言：

如果看到題目，覺得檔案被加密保護是一件「很好」的事情，那您應該是還沒搭上勒索病毒的熱潮，資管部於20160505發佈公告：

近來「勒贖病毒」猖獗，一旦中毒將造成電腦檔案被加密鎖住無法使用的窘境，其主要散播途徑有「釣魚郵件」「網頁惡意連結」「flash 漏洞」，請同仁保持警覺，建議因應作法：

1. 勿開啟email 附件副檔名為 .js 或壓縮檔內含之 .js 檔案，這些通常是下載並執行勒贖病毒的木馬程式！！ 
1. 避免瀏覽色情、暴力、賭博、電玩等資安風險較高且非作業所需的網站。
1. 請隨時留意更新/修補 flash player。

電腦地宮的世界裡，有正直善良的駭客(Hacker)也有居心叵測的黑客(Cracker)。這是全民連網的時代，資訊觀念紮實與技術技巧純熟底子深厚的地宮黑客們，透過各種不同的手法刷存在感展示技術演化到牟取利益。從以前企業或大型組織面臨的持續滲透威脅，不自覺的檔案外洩或金融系統被侵蝕，到現在直接衝擊到每個使用者的電腦，直接把你的檔案加密，達到最終的目的，跟你勒索要錢。


##二、觀念宣導：

進入案例說明與手法分析之前，先來段概念宣導，怕你不想看太長的系刊就關掉了：

###2.1 停用Windows Script Host服務

幾起勒索軟體常見的入侵到電腦的方法，都是誘拐使用者執行壓縮檔案中附帶的Java Script檔案(副檔名為.js)，這些JS會偷偷呼叫Windows作業系統的Windows Script Host服務，連線到存放惡意加密程式的網站，下載惡意程式的檔案回來執行。因此，在不影響生產作業以及日常辦公的前提下，建議停用Windows Script Host服務，能夠減少被勒索軟體入侵的管道。停用Windows Script Host組態檔[1]，下載解壓縮後點兩下"1停用WSH.reg"匯入即可。如果同仁執行日常業務需要啟用Windows Script Host服務[2]，可以下載點解壓縮點選"2啟用WSH.reg"檔案執行恢復服務，背後的原理參考F-Secure[3]或綠色工廠[4]的網誌。

###2.2 備份重要文件

平常應習慣重要文件備份，國內網路安全巨擘趨勢科技介紹了世界備份日(World Backup Day)三二一原則[5]，概念為

1. 至少備份__三__份
1. 使用__兩__種不同形式
1. 其中__一__份備份要存放異地。
詳細請參趨勢科技撰寫的文章，在此不多描述，原則主要作為規劃參考而非奉為一成不變的圭臬，重點是依照自己能力與狀況規劃備份方式，養成定時備份的好習慣。筆者自己家中的資料備份是本機一份、同地非即時網路磁碟一份、異地兩份、雲端硬碟再一份，做到五份的備份。同地網路磁碟強調非即時連線的原因是勒索病毒會搜尋並加密你連線中的磁碟，如果平常就透過網路上的芳鄰隨時連線著，萬一使用的電腦中毒、連線著的網路磁碟裡面存放的檔案，就跟著一起被加密了。如果檔案有備份在同地的網路磁碟，而且平常不會直接連線著，可以降低萬一中勒索病毒時候的損失。而採用雲端硬碟同步，出問題有個退版或往回復原的機制在。

###2.3 自己做好把關人

資管部的公告可以濃縮成三句話，再加上一點叮嚀：

莫名檔案不要亂開 - 來路不明的附加檔案、撿到的隨身碟、Java Script檔案、簡訊連結等，不清楚不明白的不要亂碰。
奇怪網站不要亂上 - 無關工作的廣告、賭博、電玩、影音、非法軟體，都是吸引使用者點選的誘因。
軟體系統不忘更新 - Flash Player、Windows作業系統漏洞多，要定期修補，不要門戶大開。
中毒直接拔電通報 - 萬一發現檔案出現「被加密」的狀況，直接把電源切掉、電線拔掉，不要透過Windows正常關機，我們無法確定病毒跟奪魂鋸JIGSAW一樣[6]偵測到關機而有額外動作，有的病毒會偵測到關機訊號把自己毀屍滅跡或是轉而開始刪除檔案，碰到此狀況就直接拔電並且通報資管部2756。
要注意的事情是，這些觀念跟方法都只在降低入侵的管道，不代表就不會被入侵，資訊安全管理就是在合理的人力物力與財力的範圍內，盡量降低可能的風險，但最大的風險還是人，畢竟，釣魚網站、社交工程、廣告綁架這些內容，都是經過使用者按下了「同意」、「是」、「OK」，這些惡意軟體才有權限跟我們的電腦進行第一次親密接觸，請務必保持警覺小心防範。